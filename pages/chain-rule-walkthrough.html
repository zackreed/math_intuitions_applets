<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chain Rule - Composition and Rate Propagation</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <link rel="stylesheet" href="../css/styles.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/quiz.js"></script>
</head>
<body>
    <div class="page-container">
        <header>
            <a href="../index.html" style="color: #00d9ff; text-decoration: none; font-weight: bold;">&larr; Back to Home</a>
            <h1>‚õìÔ∏è Chain Rule: Composition and Rate Propagation</h1>
            <p style="font-size: 1.2em; margin-top: 10px;">Explore how rates of change propagate through composed functions</p>
        </header>
        
        <div class="content">
            <!-- Introduction Section -->
            <div class="section">
                <h2>üéØ Introduction</h2>
                <p>The chain rule is one of the most powerful tools in calculus. It tells us how to differentiate <strong>composed functions</strong> ‚Äî functions built by plugging one function into another.</p>
                
                <div class="key-concepts">
                    <h4>Key Concept: The Chain Rule</h4>
                    <p>If \(y = f(x)\) and \(s = g(y)\), then the composite function \(s = g(f(x))\) has derivative:</p>
                    <p style="text-align: center; font-size: 1.4em; margin: 15px 0;">
                        \(\frac{ds}{dx} = \frac{ds}{dy} \cdot \frac{dy}{dx}\)
                    </p>
                    <p>In Leibniz notation, this beautifully shows how the rates "multiply through" the composition.</p>
                    <p style="margin-top: 15px;">In function notation: If \(h(x) = g(f(x))\), then \(h'(x) = g'(f(x)) \cdot f'(x)\)</p>
                </div>
            </div>
            
            <!-- Interactive Applet -->
            <div class="section">
                <h2>üìä Interactive Chain Rule Visualization</h2>
                <p><strong>Instructions:</strong></p>
                <ol>
                    <li>The top canvas shows \(y = f(x)\) ‚Äî drag the red point to change \(x\).</li>
                    <li>The bottom canvas shows \(s = g(y)\) ‚Äî the output from the first function becomes the input to the second.</li>
                    <li>Watch how the derivatives multiply: \(\frac{ds}{dx} = \frac{ds}{dy} \cdot \frac{dy}{dx}\)</li>
                    <li>The zoomed views show the tangent lines and differentials at each stage.</li>
                </ol>
                
                <div class="applet-container">
                    <iframe src="../applets/chain-rule-viz.html" width="850" height="600" style="border: none; border-radius: 8px; max-width: 100%; overflow: hidden;"></iframe>
                </div>
            </div>
            
            <!-- Guided Explorations -->
            <div class="section">
                <h2>üß™ Guided Explorations</h2>
                
                <div class="exploration" id="exp1">
                    <h4>Exploration 1: Understanding Composition</h4>
                    <p><strong>Observe:</strong> Drag the point on the top graph. Notice how its \(y\)-value becomes the \(x\)-value (input) for the bottom graph.</p>
                    <p><strong>Question:</strong> What does the composition \(s = g(f(x))\) mean in terms of the two separate functions?</p>
                    <div class="options">
                        <div class="option" onclick="selectRadio(this, 'exp1', 'a')">
                            <input type="radio" name="exp1" value="a"> The output of \(f\) becomes the input to \(g\).
                        </div>
                        <div class="option" onclick="selectRadio(this, 'exp1', 'b')">
                            <input type="radio" name="exp1" value="b"> We add the two functions together.
                        </div>
                        <div class="option" onclick="selectRadio(this, 'exp1', 'c')">
                            <input type="radio" name="exp1" value="c"> We multiply the two functions together.
                        </div>
                    </div>
                    <button class="check-btn" onclick="checkAnswer('exp1', 'a')">Check Answer</button>
                    <div class="feedback" id="exp1-feedback"></div>
                </div>
                
                <div class="exploration" id="exp2">
                    <h4>Exploration 2: Rate Multiplication</h4>
                    <p><strong>Look at:</strong> The legend boxes show \(\frac{dy}{dx}\) (top graph) and \(\frac{ds}{dy}\) (bottom graph).</p>
                    <p><strong>Question:</strong> If \(\frac{dy}{dx} = 2\) and \(\frac{ds}{dy} = 3\), what is \(\frac{ds}{dx}\)?</p>
                    <div class="number-input">
                        <label>\(\frac{ds}{dx}\) =</label>
                        <input type="number" id="exp2-input" step="0.1" placeholder="Enter value">
                    </div>
                    <button class="check-btn" onclick="checkNumericAnswer('exp2', 6, 0.1)">Check Answer</button>
                    <div class="feedback" id="exp2-feedback"></div>
                </div>
                
                <div class="exploration" id="exp3">
                    <h4>Exploration 3: Differential Interpretation</h4>
                    <p><strong>Try this:</strong> Move to a point where \(\frac{dy}{dx}\) is negative in the top graph.</p>
                    <p><strong>Question:</strong> If \(\frac{dy}{dx} < 0\) (negative) and \(\frac{ds}{dy} > 0\) (positive), what sign will \(\frac{ds}{dx}\) have?</p>
                    <div class="options">
                        <div class="option" onclick="selectRadio(this, 'exp3', 'a')">
                            <input type="radio" name="exp3" value="a"> Negative (because negative √ó positive = negative)
                        </div>
                        <div class="option" onclick="selectRadio(this, 'exp3', 'b')">
                            <input type="radio" name="exp3" value="b"> Positive
                        </div>
                        <div class="option" onclick="selectRadio(this, 'exp3', 'c')">
                            <input type="radio" name="exp3" value="c"> Zero
                        </div>
                    </div>
                    <button class="check-btn" onclick="checkAnswer('exp3', 'a')">Check Answer</button>
                    <div class="feedback" id="exp3-feedback"></div>
                </div>
            </div>
            
            <!-- Practice Questions -->
            <div class="section">
                <h2>üìù Practice Questions</h2>
                
                <div class="question" id="q1">
                    <h4>Question 1: Chain Rule Calculation</h4>
                    <p>Let \(h(x) = (x^2 + 1)^3\). We can write this as \(h(x) = g(f(x))\) where \(f(x) = x^2 + 1\) and \(g(u) = u^3\).</p>
                    <p><strong>(a)</strong> What is \(f'(x)\)?</p>
                    <div class="options">
                        <div class="option" onclick="selectRadio(this, 'q1a', 'a')">
                            <input type="radio" name="q1a" value="a"> \(2x\)
                        </div>
                        <div class="option" onclick="selectRadio(this, 'q1a', 'b')">
                            <input type="radio" name="q1a" value="b"> \(x^2\)
                        </div>
                        <div class="option" onclick="selectRadio(this, 'q1a', 'c')">
                            <input type="radio" name="q1a" value="c"> \(2x + 1\)
                        </div>
                    </div>
                    <button class="check-btn" onclick="checkAnswer('q1a', 'a')">Check Answer</button>
                    <div class="feedback" id="q1a-feedback"></div>
                    
                    <p style="margin-top: 20px;"><strong>(b)</strong> What is \(g'(u)\)?</p>
                    <div class="options">
                        <div class="option" onclick="selectRadio(this, 'q1b', 'a')">
                            <input type="radio" name="q1b" value="a"> \(u^2\)
                        </div>
                        <div class="option" onclick="selectRadio(this, 'q1b', 'b')">
                            <input type="radio" name="q1b" value="b"> \(3u^2\)
                        </div>
                        <div class="option" onclick="selectRadio(this, 'q1b', 'c')">
                            <input type="radio" name="q1b" value="c"> \(3u\)
                        </div>
                    </div>
                    <button class="check-btn" onclick="checkAnswer('q1b', 'b')">Check Answer</button>
                    <div class="feedback" id="q1b-feedback"></div>
                    
                    <p style="margin-top: 20px;"><strong>(c)</strong> Using the chain rule, \(h'(x) = g'(f(x)) \cdot f'(x)\). What is \(h'(x)\)?</p>
                    <div class="options">
                        <div class="option" onclick="selectRadio(this, 'q1c', 'a')">
                            <input type="radio" name="q1c" value="a"> \(3(x^2 + 1)^2 \cdot 2x\)
                        </div>
                        <div class="option" onclick="selectRadio(this, 'q1c', 'b')">
                            <input type="radio" name="q1c" value="b"> \(6x^5\)
                        </div>
                        <div class="option" onclick="selectRadio(this, 'q1c', 'c')">
                            <input type="radio" name="q1c" value="c"> \((2x)^3\)
                        </div>
                    </div>
                    <button class="check-btn" onclick="checkAnswer('q1c', 'a')">Check Answer</button>
                    <div class="feedback" id="q1c-feedback"></div>
                </div>
                
                <div class="question" id="q2">
                    <h4>Question 2: Real-World Chain Rule</h4>
                    <p>A balloon is being inflated. Its radius \(r\) increases with time at a rate of \(\frac{dr}{dt} = 2\) cm/s. The volume of a sphere is \(V = \frac{4}{3}\pi r^3\).</p>
                    <p><strong>(a)</strong> At the instant when \(r = 5\) cm, what is \(\frac{dV}{dr}\)?</p>
                    <p class="hint">Hint: \(\frac{dV}{dr} = 4\pi r^2\)</p>
                    <div class="number-input">
                        <label>\(\frac{dV}{dr}\) = </label>
                        <input type="number" id="q2a-input" step="1" placeholder="Enter value (use œÄ ‚âà 3.14)">
                        <span> cm¬≤</span>
                    </div>
                    <button class="check-btn" onclick="checkNumericAnswer('q2a', 314, 5)">Check Answer</button>
                    <div class="feedback" id="q2a-feedback"></div>
                    
                    <p style="margin-top: 20px;"><strong>(b)</strong> Using the chain rule, \(\frac{dV}{dt} = \frac{dV}{dr} \cdot \frac{dr}{dt}\). What is \(\frac{dV}{dt}\) at this instant?</p>
                    <div class="number-input">
                        <label>\(\frac{dV}{dt}\) = </label>
                        <input type="number" id="q2b-input" step="1" placeholder="Enter value">
                        <span> cm¬≥/s</span>
                    </div>
                    <button class="check-btn" onclick="checkNumericAnswer('q2b', 628, 10)">Check Answer</button>
                    <div class="feedback" id="q2b-feedback"></div>
                </div>
            </div>
            
            <!-- Symbolic Computation Section -->
            <div class="section">
                <h2>üñ•Ô∏è Symbolic Computation</h2>
                <p>Use Python with SymPy to verify chain rule calculations symbolically.</p>
                
                <div class="sage-container">
                    <h4>Chain Rule Calculator</h4>
                    <p>The code below defines a composite function and computes its derivative using the chain rule.</p>
                    
                    <div class="sagecell-python" id="sagecell1">from sympy import *

x = Symbol('x')

# Define inner function f(x) and outer function g(u)
f = x**2 + 1
g_of_u = lambda u: u**3

# Composite function h(x) = g(f(x))
h = g_of_u(f)

# Compute derivatives
f_prime = diff(f, x)
g_prime_at_f = diff(g_of_u(Symbol('u')), Symbol('u')).subs(Symbol('u'), f)
h_prime_chain = g_prime_at_f * f_prime

# Direct derivative
h_prime_direct = diff(h, x)

print(f"f(x) = {f}")
print(f"g(u) = u^3")
print(f"h(x) = g(f(x)) = {h}")
print(f"\nf'(x) = {f_prime}")
print(f"g'(f(x)) = {g_prime_at_f}")
print(f"\nChain Rule: h'(x) = g'(f(x)) ¬∑ f'(x) = {h_prime_chain}")
print(f"Direct: h'(x) = {h_prime_direct}")
print(f"\nSimplified: {simplify(h_prime_chain)}")</div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Chain Rule Walkthrough | For educational purposes</p>
            <p style="text-align:center; margin: 40px 0 10px 0; font-size: 0.95em; color: #888;">
    ¬© 2025 Zackery Reed. All rights reserved.
</p>
        </footer>
    </div>
    
    <script>
        sagecell.makeSagecell({
            inputLocation: '.sagecell-python',
            languages: ['python'],
            evalButtonText: 'Run Code'
        });
        
        document.addEventListener('DOMContentLoaded', () => {
            if (window.renderMathInElement) {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '\\(', right: '\\)', display: false}
                    ]
                });
            }
        });
    </script>
</body>
</html>
